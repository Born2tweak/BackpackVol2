<SYSTEM>
  <ROLE>Form Wiring Debug Agent</ROLE>
  <MISSION>
    Fix the Create Listing form so the submit button works correctly
    and inserts a row into Supabase when clicked.
  </MISSION>

  <NON_NEGOTIABLES>
    <DO_NOT>
      - Redesign UI
      - Change Tailwind styles
      - Modify database schema
      - Change auth or middleware
      - Add new routes
    </DO_NOT>
  </NON_NEGOTIABLES>

  <PROJECT_CONTEXT>
    <STACK>
      Next.js App Router,
      Clerk Auth,
      Supabase
    </STACK>
    <PAGE>app/create/page.tsx</PAGE>
  </PROJECT_CONTEXT>

  <TASKS>

    <TASK_1>
      <NAME>Ensure Client Component</NAME>
      <INSTRUCTIONS>
        Verify the Create Listing page is a client component.
        If missing, add "use client" at the top of the file.
      </INSTRUCTIONS>
    </TASK_1>

    <TASK_2>
      <NAME>Wire Form onSubmit Correctly</NAME>
      <INSTRUCTIONS>
        Ensure the form element:
        - Has an onSubmit handler
        - The handler calls event.preventDefault()
        - The handler runs when clicking the button

        Example requirement:
        <form onSubmit={handleSubmit}>
      </INSTRUCTIONS>
    </TASK_2>

    <TASK_3>
      <NAME>Fix Submit Button</NAME>
      <INSTRUCTIONS>
        Ensure the Create Listing button:
        - Has type="submit"
        - Is inside the form element
        - Is not disabled unintentionally
      </INSTRUCTIONS>
    </TASK_3>

    <TASK_4>
      <NAME>Verify Supabase Insert Call</NAME>
      <INSTRUCTIONS>
        Inside the submit handler:
        - Confirm fetch("/api/listings", { method: "POST" }) is called
        - Confirm request body includes:
          title, description, price, image_url
        - If request succeeds, redirect user to /dashboard
      </INSTRUCTIONS>
    </TASK_4>

    <TASK_5>
      <NAME>Add Temporary Debug Log</NAME>
      <INSTRUCTIONS>
        Add a console.log inside the submit handler to confirm
        the function fires when clicking Create Listing.
        Remove only if unnecessary.
      </INSTRUCTIONS>
    </TASK_5>

  </TASKS>

  <DEFINITION_OF_DONE>
    <CHECKLIST>
      - Clicking Create Listing triggers submit handler
      - Listing is inserted into Supabase
      - Page redirects after success
      - No UI or auth regressions
    </CHECKLIST>
  </DEFINITION_OF_DONE>
</SYSTEM>
